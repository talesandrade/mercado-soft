{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Sale(){const navigate=useNavigate();const[carrinho,setCarrinho]=useState([]);const[message,setMessage]=useState('');function addProducToCart(id,nome,valor,imposto){const copyCarrinho=[...carrinho];const item=copyCarrinho.find(carrinho=>carrinho.id===id);if(!item){copyCarrinho.push({id:id,nome:nome,valor:valor,imposto:imposto,qtd:1});}else{item.qtd=item.qtd+1;}setCarrinho(copyCarrinho);}const FinalizarCarrinho=async()=>{const copyCarrinho=[...carrinho];console.log(copyCarrinho);try{const res=await axios.post(\"http://localhost:8080/finalizar-venda\",copyCarrinho);if(res.data.success){setMessage(res.data.data.success);setTimeout(()=>{navigate('/salelist');},2000);}}catch(err){console.log(err);}};const[productData,setProductData]=useState([]);const[formvalue,setFormvalue]=useState([]);const handleInput=e=>{setFormvalue({...formvalue,[e.target.name]:e.target.value});};useEffect(()=>{const getProductList=async()=>{var res=await axios.get(\"http://localhost:8080/produtos\");if(res!==null&&res!==void 0&&res.data){setProductData(res.data.data);}};getProductList();},[]);return/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h5\",{children:\"Painel de venda\"}),/*#__PURE__*/_jsx(\"p\",{children:message}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Link,{to:\"/salelist\",className:\"btn btn-success\",children:\"Lista de vendas\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{class:\"container text-center\",children:/*#__PURE__*/_jsx(\"div\",{class:\"row align-items-start\",children:productData.map((pData,index)=>{return/*#__PURE__*/_jsx(\"div\",{class:\"col-md-3\",children:/*#__PURE__*/_jsx(\"div\",{class:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{class:\"card-title\",children:pData.nome}),/*#__PURE__*/_jsxs(\"p\",{class:\"card-text\",children:[\"R$ \",pData.valor]}),/*#__PURE__*/_jsx(\"button\",{class:\"btn btn-primary\",onClick:()=>addProducToCart(pData.id,pData.nome,pData.valor,pData.imposto),children:\"Adicionar\"})]})})});})})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h5\",{children:\"Carrinho de compras\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Nome\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Valor Un\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"quantidade\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Valor L\\xEDquido\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"impostos\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"total\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:carrinho.map((cData,index)=>{return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:cData.nome}),/*#__PURE__*/_jsxs(\"td\",{children:[\"R$ \",cData.valor]}),/*#__PURE__*/_jsx(\"td\",{children:cData.qtd}),/*#__PURE__*/_jsxs(\"td\",{children:[\"R$ \",cData.valor*cData.qtd]}),/*#__PURE__*/_jsxs(\"td\",{children:[cData.imposto,\"%\"]}),/*#__PURE__*/_jsxs(\"td\",{children:[\"R$ \",cData.valor*cData.qtd-cData.imposto*(cData.valor*cData.qtd)/100]})]});})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{class:\"btn btn-primary\",onClick:()=>FinalizarCarrinho(),children:\"Finalizar Compra\"})]})});}export default Sale;","map":{"version":3,"names":["React","useEffect","useState","Link","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","Sale","navigate","carrinho","setCarrinho","message","setMessage","addProducToCart","id","nome","valor","imposto","copyCarrinho","item","find","push","qtd","FinalizarCarrinho","console","log","res","post","data","success","setTimeout","err","productData","setProductData","formvalue","setFormvalue","handleInput","e","target","name","value","getProductList","get","Fragment","children","className","to","class","map","pData","index","onClick","scope","cData"],"sources":["/var/www/mercado-front/src/Component/Sale.js"],"sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport { Link , useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\n        \n\nfunction Sale(){\n\n    const navigate = useNavigate();\n    const [carrinho, setCarrinho] = useState([]);\n    const [message, setMessage] = useState('');\n\n    function addProducToCart(id, nome, valor, imposto){\n        const copyCarrinho = [...carrinho];\n\n        const item = copyCarrinho.find((carrinho) => carrinho.id === id);\n\n        if (!item) {\n            copyCarrinho.push({ id: id, nome: nome, valor: valor, imposto: imposto, qtd: 1 });\n        } else {\n            item.qtd = item.qtd + 1;\n        }\n\n        setCarrinho(copyCarrinho);\n    }\n\n    const FinalizarCarrinho = async () => {\n\n            const copyCarrinho = [...carrinho];\n\n            console.log(copyCarrinho);\n\n            try {\n\n                const res = await axios.post(\"http://localhost:8080/finalizar-venda\",copyCarrinho);\n                if(res.data.success){\n                    setMessage(res.data.data.success);\n                    setTimeout(\n                        ()=>{\n                            navigate('/salelist')\n                        }, 2000\n                    );\n                }\n\n            } catch (err) {\n                console.log(err);\n            }\n\n            \n        }\n\n\n    const [productData, setProductData] = useState([]);\n    const [formvalue, setFormvalue] = useState([]);\n    const handleInput =(e)=>{\n        setFormvalue({...formvalue, [e.target.name]:e.target.value});\n    }\n    useEffect( ()=>{\n        const getProductList = async()=>{\n            var res = await axios.get(\"http://localhost:8080/produtos\");\n            if (res?.data) {\n                setProductData(res.data.data);\n            }\n        }\n        getProductList();\n\n    },[]);\n\n    return(\n        <React.Fragment>\n            <div className=\"container\">\n\n                <br/>\n                    <h5>Painel de venda</h5>\n                <p>{ message }</p>\n                <br/>\n                \n                <Link to=\"/salelist\" className=\"btn btn-success\">Lista de vendas</Link>\n                <br/><br/>\n                <div class=\"container text-center\">\n                    <div class=\"row align-items-start\">\n                        {\n                            productData.map((pData, index)=>{\n                                return (\n                                <div class=\"col-md-3\">\n                                    <div class=\"card\">\n                                        <div class=\"card-body\">\n                                            <h5 class=\"card-title\">{pData.nome}</h5>\n                                            <p class=\"card-text\">R$ {pData.valor}</p>\n                                            <button class=\"btn btn-primary\" onClick={() => addProducToCart(pData.id,pData.nome,pData.valor,pData.imposto,)}>Adicionar</button>\n                                        </div>\n                                    </div>\n                                </div>\n\n                                );\n                            })\n                        }\n                    </div>\n                </div>\n                <br/>\n                <h5>Carrinho de compras</h5>\n                                \n                    <table className=\"table\">\n                        <thead>\n                            <tr>\n                                <th scope=\"col\">Nome</th>\n                                <th scope=\"col\">Valor Un</th>\n                                <th scope=\"col\">quantidade</th>\n                                <th scope=\"col\">Valor LÃ­quido</th>\n                                <th scope=\"col\">impostos</th>\n                                <th scope=\"col\">total</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {\n                                carrinho.map((cData, index)=>{\n                                    return (\n                                    <tr>\n                                        <td>{cData.nome}</td>\n                                        <td>R$ {cData.valor}</td>\n                                        <td>{cData.qtd}</td>\n                                        <td>R$ {cData.valor*cData.qtd}</td>\n                                        <td>{cData.imposto}%</td>\n                                        <td>R$ {(cData.valor*cData.qtd)-((cData.imposto * (cData.valor*cData.qtd)) / 100) }</td>\n                                    </tr>\n                                    );\n                                })\n                            }\n                            \n                        </tbody>\n                    </table>\n                    <br/>\n                    <button class=\"btn btn-primary\" onClick={() => FinalizarCarrinho()}>Finalizar Compra</button>\n            </div>\n        </React.Fragment>\n    );\n}\n\nexport default Sale;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}